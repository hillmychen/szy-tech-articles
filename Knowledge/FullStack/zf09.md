# 珠峰前端全栈培训第九周：h5 css3响应式布局webpp

[TOC]

## 课时168：html5表单元素的新特性

> 说实话，可能是在太水，看不下去。另见[html5学习笔记](/notes/learning/html/html5.md)

## 课时169：less的基础和编译

- less使用的两种方法
  1. 使用Node编译后输入css文件
  2. 外部引入`less.js`脚本在客服端编译

- 使用less.js脚本编译步骤：
  1. 编写less代码并保存成本地文件(后缀一般.less)
  2. 在html页面中引入该文件，并在标签内添加`/less`标记：rel="stylesheet/less"
  3. 引入less编译脚本`<script type="text/javascript" charset="utf-8" src="../less.min.js"></script>`
  
```less
@shadow-color: #888888;
@rcolor: red;

* {
  margin: 0;
  padding: 0;
}

// iscolor是less的内置函数用于判断后返回true或false，when也是逻辑判断
.box-shadow(@style, @c) when (iscolor(@c)) {
  -webkit-box-shadow: @style @c;
  box-shadow: @style @c;
}

.box-transform(@scale: 1) when (isnumber(@scale)) {
  transform: scale(@scale);
}

.box-transition(@property: all, @duration, @funtion: linear, @delay: .1s) {
  //这里@arguments功能和JS保持一致
  transition: @arguments;
}

.container {
  width: 200px;
  height: 200px;
  border: 1px solid @rcolor;
  margin: 200px auto;
  .box-shadow(10px 10px 5px, @shadow-color);

  //当鼠标在container容器上时, 这里&相当于面向对象中的this关键字
  &:hover {
    .box-transition(@duration: .2s);
    .box-transform(ok);
  }

  // 这里在container的花括号内写的类编译后编程它的子样式, 相当于.container.box
  .box {
    height: 160px;
    width: 160px;
    margin: 20px auto;
    border: 1px dashed #008000;

    &:hover {
      background: #dedede;
    }
  }
}
```

## 课时170：less的语法和使用

### LESS基本语法

> 主要分为变量、混合(Mixins)、嵌套规则、运算、函数、作用域等几方面

### 变量

  和JS中的变量一样，只是LESS的变量定义用`@`而已。

```less
@link-color: #428bca;
// darken为less提供的颜色加深方法
@link-color-hover: darken(@link-color, 10%);
a {
    color: @link-color;
    &:hover {
        color: @link-color-hover
    }
}
```

除了用变量存储公用的属性值，我们还可以用变量存储公有的URL、选择器等等

```less
.@{selector} {
    width: 100px;
    height: 100px;
    @{property}: #000;
    background: url("@{bgImg}/test.png");
    
    &:after {
        display: block;
        content: @@var;
    }
}

@selector: box;         //这里编译后等于类选择器了~~
@bgImg: "../static";    //这里相当于存储了url 地址~~
@property: color;       //这里等于存储的是属性名~~
@name: "Jerry Shi";     //这里定义了一个变量，但还没用~~
@var: "name";           //这里通过两个@将变量名再一次转换成变量~~牛牛牛！
```

- 在上述代码中，变量存储的值可以作为选择器，也可以作为样式属性名，同样也可以像类似于JS中字符串拼接的方式把变量值和另一个字符串进行拼接，而且@@var是把var变量存储的值作为另一个变量名从而获取对应的值。
- 还需注意的是，变量可以定义在使用代码的下面，这个有点类似于Js中的预解释，不管写上面还是下面，都是相当于全局变量，并且都可以把存储值获取到。
- 如果该变量用在类选择器、属性名和url地址时记得加花括号哦`{ }`

### 混合(Mixins)

> 字面意思像是把很多的样式混合在一起，其实理解不对，应该是把某个选择器中的样式拿过来使用。


```less
// public既是普通的样式类型，也是一个方法！
.public {
    width: 100px;
    height: 100px;
}
// public加括号就是不编译，该用能用。
.public1() {
    width: 100px;
    height: 100px;
}

// “征用”：把原来的样式克隆一份拿过来使用；如果public1加括号，public1本身不编译
.box1 {
    .public;
}

// “公用”：和原来的选择器公用一套样式，但是需要保证原来的选择器没加括号
.box2 {
    &:extend(.public);
}

// “公用”
.box3:extend(.public) {
}
// 如果选择器加了小括号，则表明为函数，只能被别的选择器调用，不能“公用”
```

### 命名空间和作用域

```less
@v: 1;
.box {
    @v: 10;
    
    &:hover {
        z-index: @v;  // -> 10  私有作用域嵌套，同JS一样！
    }
}
```

### !important

在调用的混合集后追加`!important`关键字，可以使混合集里面的所有属性都继承`!important`

```less
.public {
    width: 100px;
    height: 100px;
    
    &:hover {
        background: #fff;
    }
}

.box {
    .public !important; // 把publuc及子孙元素的样式都继承过来了
}
```

- 为什么会有`!important`？
  - 因为在浏览器渲染过程中，浏览器默认会有样式，父类有样式，子类有样式，到元素是应大大小小继承了许许多多样式，此时可以使用`!important`指定地提高某类样式的权重，一般在IE6~7中使用。

### Parametric Mixins

> 如同JS一样，LESS也可以向函数一样设定形参，这个技巧经常会用，例如在处理CSS3兼容问题。

```less
.transition(@property: all, @duration: 1s, @funtion: linear; @delay: 0s) {
    -webkit-transition: @property @duration @funtion @delay;
    -moz-transition: @property @duration @funtion @delay;
    -ms-transition: @property @duration @funtion @delay;
    -o-transition: @property @duration @funtion @delay;
    transition: @property @duration @funtion @delay;
}
```

- LESS中也有类似于JavaScript的`arguments`默认参数：

```less
.transition(@property: all, @duration: 1s, @funtion: linear; @delay: 0s) {
    -webkit-transition: @arguments;
    transition: @arguments;
}
```

- 同时变量也可以像JS的函数一样操作，不仅仅有参数，还有返回值：

```less
.average (@x, @y) {
    @result: ((@x + @y) / 2);
}

div {
    // 这里方法返回的是定义变量的一个"表达式"，我们不能直接调用，其实并不是返回了，是字符串替换而已！！！需要提前执行一把！！！
    .average(16px, 50px);   // "call" the mixin
    margin: @result;        // use its "return" value
}
```

### Mixin Guards

> Mixin中是可以设置条件的，常用的条件运算符：>、>=、<、<=、=，这里的的确确是一个等号；还可以使用LESS内置的IS函数：iscolor、isnumber、isstring、iskeyword、isurl、ispixel、ispercentage...

```less
// 可以理解为函数的重载，通过不同的条件，自动找到适配的样式
.mixin (@a) when (lightness(a) >= 50%) {
    background-color: black;
}

.mixin (@a) when (lightness(a) >= 50%) {
    background-color: white;
}
 
.box1 {
    .mixin(#ddd);
}
///////////////////
.public(@x) when (@x < 10) and (@x > 0) {
    background: red;
}

.public(@x) when (@x >= 10) {
    background: green;
}

.public(@x) when (@x <= 0) {
    background: blue;
}
```

- 可以通过与`&`特性结合实现`if`类型的语句

### Loops

在less中，混合可以调用它自己本身。

```less
.public(@n, @i:1) when (@i <=4) {
    .box@{i} {
        & when (@i = 1) {
            width: 100px;
        }
        & when (@i = 3) {
            width: 100px;
        }
        & when (@i = 2) {
            width: 200px;
        }
        & when (@i = 4) {
            width: 200px;
        }
    }
}

// 编译后会生成.box1~.box4，然后width也会有不同。
```

### Merge

Merge特性可以从多个属性中将值，集合到某一个样式属性的列表中（也就是多样式效果）。在编写的时候，+代表以逗号分隔，+_代表多个之前以空格分隔。

```less

    //->LESS代码
    .mixin() {
      box-shadow+: inset 0 0 10px #555;
    }

    .myclass {
      .mixin;
      box-shadow+: 0 0 20px black;
    }

    .mixin2() {
      transform+_: scale(2);
    }

    .myclass2 {
      .mixin2;
      transform+_: rotate(45deg);
    }

    //->输出的CSS
    .myclass {
        box-shadow: inset 0 0 10px #555, 0 0 20px black;
    }

    .myclass2 {
        transform: scale(2) rotate(45deg);
    }
```

```less
.transform(@v:1) {
    -webkit-transform+_: scale(@v);
}

.box {
    .transform(1.5);
}

.box1 {
    .transform(1.5);
    -webkit-transform+_: rotate(45deg);
}
```
编译后的结果：
```css
.box {
    -webkit-transform: scale(1.5);
}

.box2 {
    -webkit-transform: scale(1.5) rotate(45deg);
}
```

### `&` Parent Selector

> `&`运算符其实就是让当前的选择器和父级选择器按照特定规则执行连接


```less
// less
&&-top {
    color: black;
}

&, &-top {
    color: orange;
}
////css////////
.box.box-top {
    color: black;
}

.box, .box-top {
    color: orange;
}
```

- 可以改变选择器顺序，下面的案例中，选择器.no-border-radius &会前置插入它的父选择器.header .menu，最后变成.no-border-radius .header .menu形式输出：

```less
.header {
    .menu {
        border-radius: 5px;
        .no-border-radius & {
          background-image: url('images/button-background.png');
        }
    }
}

//->输出的CSS
.header .menu {
    border-radius: 5px;
}

.no-border-radius .header .menu {
    background-image: url('images/button-background.png');
}
```

- 这里`&`倒置，编译时就会把当前这整个嵌套类都当做`&`前面类的子类对象，生成css。真不常用。

### Import Directives

> 从其他样式表中导入样式。

```less
//->LESS代码
@import "public.less";

.box {
    &:after {
        .clear;
    }
}
// 这里public有一个.clear类
//->输出的CSS:会把public中的样式也输出
.clear {
    display: block;
    height: 0;
    content: "";
    clear: both;
    zoom: 1;
}

.box:after {
    display: block;
    height: 0;
    content: "";
    clear: both;
    zoom: 1;
}
```

- 我们发现上述的操作虽然实现了调取使用，但是会把public中的less也编译到了自己的这个css中，如果不想编译的话，我们需要配置一些参数：

```less
@import (reference) "public.less";
// 相当于引入的意思
.box {
    &:after {
        .clear;
    }
}

//->输出的CSS:
.box:after {
    display: block;
    height: 0;
    content: "";
    clear: both;
    zoom: 1;
}
```

- 除了reference以外我们还可以配置一些其他的参数值： inline：在输出中包含源文件但不加工它 less：将文件作为Less文件对象，无论是什么文件扩展名 css：将文件作为CSS文件对象，无论是什么文件扩展名 once：只包含文件一次（默认行为） multiple：包含文件多次


----------

## 课时171：less常用的方法

- `data.url`：把图片转换成BASE64编码。可用于移动端项目，节省图片加载时间，是图片优化的一个手段。但LESS对于大图片是不能转码的，但可以使用BASE64工具转码(tool.css-js.com)；项目中慎用BASE64编码，移动端实在没办法处理时才考虑，那张图特别重要；传个验证码什么的话还是可以的！
- `saturate`：按百分比增加把饱和度
- `desatuate`：降低饱和度
- `lighten`：增加亮度
- `darken`：降低亮度


----------

## 课时